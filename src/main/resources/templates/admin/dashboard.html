<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/admin-layout :: head('Dashboard')"></head>
<body>
<!-- Sidebar -->
<aside th:replace="admin/admin-layout :: sidebar('dashboard')"></aside>

<!-- Main Content -->
<main class="main-content">
    <!-- Header -->
    <div th:replace="admin/admin-layout :: header('Dashboard', 'fas fa-home')"></div>

    <!-- Stats Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="font-size: 14px; color: #666; margin-bottom: 8px;">Tổng sản phẩm</h3>
                <div style="font-size: 32px; font-weight: bold; color: #333;" th:text="${tongSanPham}">0</div>
            </div>
            <div style="width: 60px; height: 60px; border-radius: 12px; background: #e3f2fd; color: #2196f3; display: flex; align-items: center; justify-content: center; font-size: 28px;">
                <i class="fas fa-box"></i>
            </div>
        </div>

        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="font-size: 14px; color: #666; margin-bottom: 8px;">Tổng đơn hàng</h3>
                <div style="font-size: 32px; font-weight: bold; color: #333;" th:text="${tongDonHang}">0</div>
            </div>
            <div style="width: 60px; height: 60px; border-radius: 12px; background: #e8f5e9; color: #4caf50; display: flex; align-items: center; justify-content: center; font-size: 28px;">
                <i class="fas fa-shopping-cart"></i>
            </div>
        </div>

        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="font-size: 14px; color: #666; margin-bottom: 8px;">Đơn chờ xác nhận</h3>
                <div style="font-size: 32px; font-weight: bold; color: #333;" th:text="${donHangChoXacNhan}">0</div>
            </div>
            <div style="width: 60px; height: 60px; border-radius: 12px; background: #fff3e0; color: #ff9800; display: flex; align-items: center; justify-content: center; font-size: 28px;">
                <i class="fas fa-clock"></i>
            </div>
        </div>

        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="font-size: 14px; color: #666; margin-bottom: 8px;">Người dùng</h3>
                <div style="font-size: 32px; font-weight: bold; color: #333;" th:text="${tongNguoiDung}">0</div>
            </div>
            <div style="width: 60px; height: 60px; border-radius: 12px; background: #f3e5f5; color: #9c27b0; display: flex; align-items: center; justify-content: center; font-size: 28px;">
                <i class="fas fa-users"></i>
            </div>
        </div>
    </div>

    <!-- Revenue Cards -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="font-size: 14px; color: #666; margin-bottom: 8px;">Tổng doanh thu</h3>
                <div style="font-size: 32px; font-weight: bold; color: #4caf50;">
                    <span th:text="${#numbers.formatDecimal(tongDoanhThu, 0, 'COMMA', 0, 'POINT')}">0</span>₫
                </div>
            </div>
            <div style="width: 60px; height: 60px; border-radius: 12px; background: #e8f5e9; color: #4caf50; display: flex; align-items: center; justify-content: center; font-size: 28px;">
                <i class="fas fa-dollar-sign"></i>
            </div>
        </div>

        <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="font-size: 14px; color: #666; margin-bottom: 8px;">Doanh thu hôm nay</h3>
                <div style="font-size: 32px; font-weight: bold; color: #2196f3;">
                    <span th:text="${#numbers.formatDecimal(doanhThuHomNay, 0, 'COMMA', 0, 'POINT')}">0</span>₫
                </div>
            </div>
            <div style="width: 60px; height: 60px; border-radius: 12px; background: #e3f2fd; color: #2196f3; display: flex; align-items: center; justify-content: center; font-size: 28px;">
                <i class="fas fa-calendar-day"></i>
            </div>
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="content-section">
        <div class="section-header">
            <h2 class="section-title">
                <i class="fas fa-shopping-cart"></i>
                Đơn hàng mới nhất
            </h2>
            <a href="/admin/don-hang" style="color: #667eea; text-decoration: none; font-size: 14px; font-weight: 500;">
                Xem tất cả <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        <table class="data-table" th:if="${donHangMoiNhat != null and !donHangMoiNhat.isEmpty()}">
            <thead>
            <tr>
                <th>Mã đơn hàng</th>
                <th>Ngày đặt</th>
                <th>Khách hàng</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
                <th>Thao tác</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="donHang : ${donHangMoiNhat}">
                <td>
                    <strong th:text="${donHang.maDonHang}">DH20241217123456</strong>
                </td>
                <td th:text="${#temporals.format(donHang.ngayDat, 'dd/MM/yyyy HH:mm')}">17/12/2024 10:30</td>
                <td th:text="${donHang.sdtNguoiNhan}">0123456789</td>
                <td>
                    <strong th:text="${#numbers.formatDecimal(donHang.tongTien, 0, 'COMMA', 0, 'POINT')} + '₫'">
                        100,000₫
                    </strong>
                </td>
                <td>
                            <span class="status-badge"
                                  th:classappend="${donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).cho_xac_nhan ? 'badge-warning' :
                                                   donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).dang_xu_ly ? 'badge-info' :
                                                   donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).dang_giao ? 'badge-info' :
                                                   donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).da_giao ? 'badge-success' : 'badge-danger'}"
                                  th:text="${donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).cho_xac_nhan ? 'Chờ xác nhận' :
                                             donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).dang_xu_ly ? 'Đang xử lý' :
                                             donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).dang_giao ? 'Đang giao' :
                                             donHang.trangThai == T(com.nvkproject3.model.DonHang.TrangThai).da_giao ? 'Đã giao' : 'Đã hủy'}">
                                Chờ xác nhận
                            </span>
                </td>
                <td>
                    <a th:href="@{'/admin/don-hang/' + ${donHang.id}}" class="btn btn-primary" style="padding: 6px 12px; font-size: 13px;">
                        <i class="fas fa-eye"></i> Chi tiết
                    </a>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="empty-state" th:if="${donHangMoiNhat == null or donHangMoiNhat.isEmpty()}">
            <i class="fas fa-inbox"></i>
            <h3>Chưa có đơn hàng nào</h3>
            <p>Chưa có đơn hàng mới trong hệ thống</p>
        </div>
    </div>
</main>
</body>
</html>